<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
  <div class="layer-dialog-body">
    <form id="signinForm" method="post" th:action="@{/init/system/sign-in}" th:object="${formModel}">
      <input type="hidden" name="paradmCompanyModel.id" th:field="*{paradmCompanyModel.id}" />
      [[#{init.message.sign_in_user}]]
      <br><br>
      <div class="form-group companyName">
        <input type="text" class="form-control name_box" id="companyName" name="paradmCompanyModel.companyName"
               maxlength="100" th:placeholder='#{init.label.company_name}' required />
      </div>
      <div class="form-group serialCode">
        <input type="text" class="form-control name_box" id="serialCode" name="paradmCompanyModel.code"
               maxlength="100" th:placeholder='#{init.label.serial}' />
      </div>
      <div class="form-group loginName">
        <input type="email" class="form-control email_box" id="loginName" name="userModel.loginName"
               maxlength="100" th:placeholder='#{init.label.login_name}' required />
      </div>
      <div th:each="parameter, rowStat : ${formModel.parameterModelList}" class="form-group">
        <input type="hidden" th:name="|parameterModelList[${rowStat.index}].parameterCode|" th:value="${parameter.parameterCode}" />
        <input type="text" class="form-control parameter_box" th:name="|parameterModelList[${rowStat.index}].parameterValue|"
               th:value="${parameter.parameterValue}" th:placeholder='${parameter.parameterCode }' required />
      </div>
      <div class="form-group captcha">
        <div class="input-group">
          <input type="text" class="form-control captcha_box" name="captcha" th:placeholder='#{common.label.captcha_value}' required />
          <span class="input-group-addon">
					  <i class="fa fa-search"><img id="kaptchaImage" th:title='#{common.label.click_here}' align="middle" /></i>
				  </span>
        </div>
      </div>
    </form>
  </div>
  <script th:inline="javascript">
    var kaptchaUrl = contextPath + 'kaptcha/image?data=';
    console.log("kaptchaUrl : " + kaptchaUrl);
    $(function () {
      $('#kaptchaImage').attr('src', kaptchaUrl + Math.floor(Math.random() * 100)).click(function(evt) {//generate captcha
        console.log("kaptchaUrl : " + kaptchaUrl);
        $(this).hide().prop('src', kaptchaUrl + Math.floor(Math.random() * 100)).fadeIn();
        evt.cancelBubble = true;
      });
    })
  </script>
</html>
